<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' gap:; style-src 'self' 'unsafe-inline'; script-src 'self' http://* 'unsafe-eval' 'unsafe-inline'; img-src 'self' data: http:; media-src *"/>
	<title>포인트</title>
	<link rel="stylesheet" type="text/css" href="../css/default.css"/>
	<link rel="stylesheet" type="text/css" href="../css/style.css"/>
	<link rel="stylesheet" type="text/css" href="../css/nav.css"/>
	<script src="../js/jquery.min.js"></script>
	<script src="../js/jquery.form.min.js"></script>
	<script src="../js/menu.js"></script>
</head>
<style>
.rank_b {padding:10px 0 10px 84px;position:relative}
.rank_b #rk_rank {width:40px;font-size:10px;line-height:33px;position:absolute;left:0;top:10px;display:inline-block;text-align:center}
.rank_b #rk_view {font-size:10px;color:#9e9e9e;display:block}
.rank_b #rk_point {font-size:10px;line-height:20px;margin-top:-10px}
.rank_b #rk_img {width:33px;height:33px;position:absolute;top:10px;left:44px}
.rank_b #rk_img img {width:100%;height:100%}
</style>
<body>
	<div id="header">
		<h1>모두의 쉐어 랭킹</h1>
		<a href="javascript:history.back();" class="header_btn_l btn_back">뒤로</a>
	</div>
	<div class="bk_gray">
		<div class="ct_wrap list_pn" style="padding: 0 16px">
			<div class="rank_b">
				<span class="txt_ov title_sub">용용용</span>
				<span class="sub_txt" id="rk_view">19,585 view</span>
				<span class="ps_r color_blog" id="rk_point">195,850 p</span>
				<span class="color_share" id="rk_rank">240</span>
				<div id="rk_img"><img src="" onError="this.src='../img/person.png'"></div>
			</div>
		</div>
		
		<div class="list_wrap">
			<ul class="list_pn bk_white" id="rank_li">
				<li>
					<a href="#none">
						<div class="rank_b">
							<span class="txt_ov title_sub">오해피</span>
							<span class="sub_txt" id="rk_view">81,577 view</span>
							<span class="ps_r color_blog" id="rk_point">815,770 p</span>
							<span id="rk_rank">1</span>
							<div id="rk_img"><img src="" onError="this.src='../img/person.png'"></div>
						</div>
					</a>
				</li>
				<li>
					<a href="#none">
						<div class="rank_b">
							<div class="">
								<span class="txt_ov title_sub">엄단아</span>
								<span class="sub_txt" id="rk_view">19,585 view</span>
								<span class="ps_r color_blog" id="rk_point">195,850 p</span>
							</div>
							<span id="rk_rank">2</span>
							<div id="rk_img"><img src="" onError="this.src='../img/person.png'"></div>
						</div>
					</a>
				</li>
			</ul>
			<div id="loading_bar" class="off"></div>
		</div>
	</div>
	<!-- 페이지 로딩 -->
	<div id="loading_wraps"></div>
	<script>
		//$("#loading_wraps").load("loading.html #lo_blog");
	</script>
	<!-- 팝업 -->
	<div id="pop"></div>
	
	<script>
	// 카테고리 on-off
    $(document).on("click",".category a",function(){  
        $(this).parent().children('a').removeClass('on');
        $(this).addClass('on');
    })
	// 도움말 버튼 팝업 띄우기
	$(document).on('click','.btn_help',function(){
		$('#pop').load("popup.html");
	})
	/*
	// 첫페이지 ajax
	$(document).ready(function(){
		string = '';
		var mb_id = member['mb_id'];
		var params = {"mb_id":mb_id};
		$.ajax({      
			type:"POST",
			data:params,			
			url:"http://modublog.co.kr/app_public/ajax/a_point_view.php",      
			success:function(data){
				//회원 DB 가져오기
				$.each(data[0],function(key,value){
					$("#mb_point").html(value.mb_point_format);
				});
				//출금내역 가져오기
				$.each(data[1],function(key,value){
					string += '<div class="ct_wrap po_info"><div class="po_txt"><p>'+value.wr_1+'원 환급 신청 (환급액:'+value.wr_10+' 원)</p><span>신청일:'+value.wr_datetime+'&nbsp;&nbsp;&nbsp;계좌:'+value.wr_2+' '+value.wr_subject+'</span>';
					if(value.ca_name == '보류'){
						string += '<span>보류사유 : '+value.wr_5+'</span>';
					}
					string += '<p class="pa_state">'+value.ca_name+'</p></div></div>';
				});
				$("#point_req_wrap").html(string);
				console.log(data);
			},   
			error:function(e){  
				console.log(e.responseText);  
			}  		
		})
		
		string1 = '';
		var params1 = {"mb_id":mb_id,"ca_name":"all"};
		$.ajax({      
			type:"POST",
			data:params1,			
			url:"http://modublog.co.kr/app_public/ajax/a_point_list.php",      
			success:function(data){
				//포인트 내역 가져오기
				$.each(data,function(key,value){
					if(value.po_point >= 0){
						point = '<span class="color_blog">+'+value.po_point+'</span>';
					}else{
						point = '-'+value.po_point;
					}
					string1 += '<li><a href="#none"><div class="list_txt"><div class="notice_txt"><span class="txt_ov title_sub">'+value.po_content+'</span><span class="date_txt">'+value.po_datetime+'</span><span class="ps_r point_txt">'+point+'</span></div></div></a></li>'
				});	
				$("#point_li").html(string1);
			},  
			complete:function(){
				$('.loading').hide();
			},			
			error:function(e){  
				console.log(e.responseText);  
			}  		
		})		
	})
	
	// 카테고리 리스트 ajax
	$(document).on("click",".ca_name",function(){
		var mb_id = member['mb_id'];
		var string1 = '';
		var ca_name = $(this).attr("data");
		var params1 = {"mb_id":mb_id,"ca_name":ca_name};
		$.ajax({      
			type:"POST",
			data:params1,			
			url:"http://modublog.co.kr/app_public/ajax/a_point_list.php",      
			success:function(data){
				//포인트 내역 가져오기
				$.each(data,function(key,value){
					if(value.po_point >= 0){
						point = '<span class="color_blog">+'+value.po_point+'</span>';
					}else{
						//point = '-'+value.po_point;
						point = value.po_point;
					}
					string1 += '<li><a href="#none"><div class="list_txt"><div class="notice_txt"><span class="txt_ov title_sub">'+value.po_content+'</span><span class="date_txt">'+value.po_datetime+'</span><span class="ps_r point_txt">'+point+'</span></div></div></a></li>'
				});	
				$("#point_li").html(string1);
				
				if(data.length < 10){
					$("#loading_bar").attr("class","on");
				}else{
					$("#loading_bar").attr("class","off");
				}
				
				list = 10;
			},   
			error:function(e){  
				console.log(e.responseText);  
			}  		
		})			
	})
	var list = 10;
	var list_num = 10;
	var temp = 'all';
	// 리스트 스크롤
	$(window).scroll(function() {
		if($(window).scrollTop() == $(document).height() - $(window).height()){
			var mb_id = member['mb_id'];
			var ca_name = $('.category .on').attr("data");
			var loading_class = $("#loading_bar").attr("class");
			var linum = $("#point_li").length;
			
			if(linum > 0 && loading_class == 'off'){
				var params = {"list_ar":list,"ca_name":ca_name,"mb_id":mb_id};
				var string1 = '';
				$.ajax({      
					type:"POST",
					data:params,			
					url:"http://modublog.co.kr/app_public/ajax/a_point_ajax.php",      
					beforeSend:function(){
						$("#loading_bar").html("<div class='loader_wrap' style='height:61px;background:#fff'><img src='../img/icon_loder.gif'></div>");
					},
					success:function(data){
						//포인트 내역 가져오기
						$.each(data,function(key,value){
							if(value.po_point >= 0){
								point = '<span class="color_blog">+'+value.po_point+'</span>';
							}else{
								//point = '-'+value.po_point;
								point = value.po_point;
							}
							string1 += '<li><a href="#none"><div class="list_txt"><div class="notice_txt"><span class="txt_ov title_sub">'+value.po_content+'</span><span class="date_txt">'+value.po_datetime+'</span><span class="ps_r point_txt">'+point+'</span></div></div></a></li>'
							console.log("$list_ar : "+value.list_ar);
						});	
						$("#point_li").append(string1);
						
						if(ca_name != temp){
							list = 10;
						}
						console.log(list);
						
						list = list + list_num;
						
						console.log(temp+"/"+ca_name);
						
						temp = ca_name;
						
						if(!string1){
							list = 10;
							$("#loading_bar").attr("class","on");
							$("#loading_bar").html("");
						}else{
							$("#loading_bar").attr("class","off");
						}
					},   
					error:function(e){  
						console.log(e.responseText);  
					}  		
				})
			}
		}	
	})
	*/
	</script>
</body>
</html>




